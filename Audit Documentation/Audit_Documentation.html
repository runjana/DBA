<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=yrPxF2fzIbKO47OcVFfZ2CvhBULzVSj67-CyYQmQBzclLT34rKZNjX_x5wwcqB1FJcp4QFgPPqKvq4Bp_6u4rQ');.lst-kix_rdkkznvcaa1q-2>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-2,lower-roman) ". "}.lst-kix_rdkkznvcaa1q-3>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-3,decimal) ". "}.lst-kix_25xwulh3ac5i-8>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-8,lower-roman) ". "}ol.lst-kix_25xwulh3ac5i-7.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-7 0}.lst-kix_rdkkznvcaa1q-1>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-1,lower-latin) ". "}.lst-kix_rdkkznvcaa1q-5>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-5,lower-roman) ". "}ol.lst-kix_rdkkznvcaa1q-4.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-4 0}.lst-kix_25xwulh3ac5i-5>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-5,lower-roman) ". "}.lst-kix_25xwulh3ac5i-4>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-4,lower-latin) ". "}.lst-kix_25xwulh3ac5i-2>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-2}.lst-kix_25xwulh3ac5i-3>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-3,decimal) ". "}.lst-kix_rdkkznvcaa1q-4>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-4,lower-latin) ". "}.lst-kix_rdkkznvcaa1q-6>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-6,decimal) ". "}.lst-kix_rdkkznvcaa1q-7>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-7,lower-latin) ". "}.lst-kix_25xwulh3ac5i-3>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-3}.lst-kix_25xwulh3ac5i-6>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-6,decimal) ". "}ol.lst-kix_rdkkznvcaa1q-1.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-1 0}.lst-kix_rdkkznvcaa1q-5>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-5}ol.lst-kix_25xwulh3ac5i-4.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-4 0}.lst-kix_25xwulh3ac5i-7>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-7,lower-latin) ". "}.lst-kix_rdkkznvcaa1q-8>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-8,lower-roman) ". "}.lst-kix_25xwulh3ac5i-4>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-4}.lst-kix_25xwulh3ac5i-7>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-7}.lst-kix_25xwulh3ac5i-1>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-1}ul.lst-kix_d3dqh8fhuak0-0{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-8.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-8 0}ul.lst-kix_d3dqh8fhuak0-1{list-style-type:none}ol.lst-kix_25xwulh3ac5i-6.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-6 0}.lst-kix_rdkkznvcaa1q-3>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-3}.lst-kix_rdkkznvcaa1q-6>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-6}.lst-kix_rdkkznvcaa1q-0>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-0}ol.lst-kix_rdkkznvcaa1q-5.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-5 0}ol.lst-kix_25xwulh3ac5i-0.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-0 0}ol.lst-kix_25xwulh3ac5i-3.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-3 0}.lst-kix_rdkkznvcaa1q-0>li:before{content:"" counter(lst-ctn-kix_rdkkznvcaa1q-0,decimal) ". "}ol.lst-kix_rdkkznvcaa1q-2.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-2 0}ol.lst-kix_rdkkznvcaa1q-8{list-style-type:none}ol.lst-kix_25xwulh3ac5i-2.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-2 0}ol.lst-kix_rdkkznvcaa1q-7{list-style-type:none}ol.lst-kix_25xwulh3ac5i-8{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-6{list-style-type:none}.lst-kix_rdkkznvcaa1q-8>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-8}ol.lst-kix_25xwulh3ac5i-7{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-5{list-style-type:none}ol.lst-kix_25xwulh3ac5i-6{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-4{list-style-type:none}ol.lst-kix_25xwulh3ac5i-5{list-style-type:none}ol.lst-kix_25xwulh3ac5i-4{list-style-type:none}ol.lst-kix_25xwulh3ac5i-3{list-style-type:none}ol.lst-kix_25xwulh3ac5i-2{list-style-type:none}.lst-kix_25xwulh3ac5i-5>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-5}ol.lst-kix_25xwulh3ac5i-1{list-style-type:none}ol.lst-kix_25xwulh3ac5i-0{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-4{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-5{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-2{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-3{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-8{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-6{list-style-type:none}ul.lst-kix_d3dqh8fhuak0-7{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-3{list-style-type:none}.lst-kix_25xwulh3ac5i-0>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-0}ol.lst-kix_rdkkznvcaa1q-2{list-style-type:none}ol.lst-kix_rdkkznvcaa1q-1{list-style-type:none}.lst-kix_rdkkznvcaa1q-2>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-2}ol.lst-kix_rdkkznvcaa1q-0{list-style-type:none}.lst-kix_25xwulh3ac5i-6>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-6}ol.lst-kix_rdkkznvcaa1q-6.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-6 0}.lst-kix_d3dqh8fhuak0-6>li:before{content:"\0025cf  "}ol.lst-kix_rdkkznvcaa1q-3.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-3 0}.lst-kix_d3dqh8fhuak0-5>li:before{content:"\0025a0  "}.lst-kix_rdkkznvcaa1q-4>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-4}.lst-kix_rdkkznvcaa1q-1>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-1}ol.lst-kix_25xwulh3ac5i-1.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-1 0}.lst-kix_d3dqh8fhuak0-0>li:before{content:"\0025cf  "}.lst-kix_d3dqh8fhuak0-8>li:before{content:"\0025a0  "}.lst-kix_d3dqh8fhuak0-7>li:before{content:"\0025cb  "}.lst-kix_25xwulh3ac5i-1>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-1,lower-latin) ". "}ol.lst-kix_25xwulh3ac5i-5.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-5 0}.lst-kix_25xwulh3ac5i-0>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-0,decimal) ". "}.lst-kix_25xwulh3ac5i-2>li:before{content:"" counter(lst-ctn-kix_25xwulh3ac5i-2,lower-roman) ". "}ol.lst-kix_rdkkznvcaa1q-0.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-0 0}.lst-kix_d3dqh8fhuak0-1>li:before{content:"\0025cb  "}ol.lst-kix_rdkkznvcaa1q-7.start{counter-reset:lst-ctn-kix_rdkkznvcaa1q-7 0}.lst-kix_d3dqh8fhuak0-2>li:before{content:"\0025a0  "}.lst-kix_rdkkznvcaa1q-7>li{counter-increment:lst-ctn-kix_rdkkznvcaa1q-7}.lst-kix_25xwulh3ac5i-8>li{counter-increment:lst-ctn-kix_25xwulh3ac5i-8}.lst-kix_d3dqh8fhuak0-4>li:before{content:"\0025cb  "}.lst-kix_d3dqh8fhuak0-3>li:before{content:"\0025cf  "}ol.lst-kix_25xwulh3ac5i-8.start{counter-reset:lst-ctn-kix_25xwulh3ac5i-8 0}ol{margin:0;padding:0}table td,table th{padding:0}.c2{margin-left:-0.8pt;padding-top:30pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;height:11pt}.c18{margin-left:35.2pt;padding-top:0pt;text-indent:0.8pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c5{margin-left:108pt;padding-top:10pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c11{margin-left:35.2pt;padding-top:10pt;text-indent:0.8pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c31{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c21{padding-top:6pt;text-indent:36pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c8{padding-top:10pt;text-indent:36pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c29{color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Economica";font-style:normal}.c16{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:italic}.c0{padding-top:10pt;text-indent:36pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c36{color:#999999;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Economica";font-style:normal}.c26{margin-left:35.2pt;padding-top:6pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:justify}.c17{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;height:11pt}.c10{margin-left:72pt;padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:normal}.c13{margin-left:-0.8pt;padding-top:3pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c14{padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c6{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:normal}.c33{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c23{padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:justify}.c38{color:#000000;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Open Sans";font-style:normal}.c37{text-decoration:none;vertical-align:baseline;font-family:"Economica";font-style:normal}.c30{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c35{text-indent:0.8pt;orphans:2;widows:2}.c25{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c24{border:1px solid black;margin:5px}.c15{margin-left:143.2pt;text-indent:0.8pt}.c32{color:#000000;font-size:30pt}.c39{orphans:2;widows:2}.c1{padding:0;margin:0}.c7{margin-left:144pt}.c28{margin-left:-0.8pt}.c20{font-style:italic}.c3{font-weight:700}.c22{margin-left:36pt}.c40{margin-left:72pt}.c9{margin-left:108pt}.c19{margin-left:180pt}.c12{padding-left:0pt}.c34{height:11pt}.c27{color:#ff0000}.title{padding-top:0pt;color:#000000;font-size:30pt;padding-bottom:0pt;font-family:"Economica";line-height:1.0;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#999999;font-size:14pt;padding-bottom:0pt;font-family:"Economica";line-height:1.0;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Open Sans"}p{margin:0;color:#000000;font-size:11pt;font-family:"Open Sans"}h1{padding-top:10pt;color:#000000;font-weight:700;font-size:16pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.5;orphans:2;widows:2;text-align:left}h2{padding-top:24pt;color:#000000;font-weight:700;font-size:13pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.0;orphans:2;widows:2;text-align:left}h3{padding-top:10pt;color:#8c7252;font-weight:700;font-size:12pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.5;orphans:2;widows:2;text-align:left}h4{padding-top:8pt;-webkit-text-decoration-skip:none;color:#666666;text-decoration:underline;font-size:11pt;padding-bottom:0pt;line-height:1.5;page-break-after:avoid;text-decoration-skip-ink:none;font-family:"Trebuchet MS";orphans:2;widows:2;text-align:left}h5{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.5;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c25"><div><p class="c2 subtitle" id="h.leajue2ys1lr"><span class="c36"></span></p><p class="c30 c28 c39"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 2.67px;"><img alt="" src="images/image4.png" style="width: 624.00px; height: 2.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="horizontal line"></span></p></div><p class="c18"><span class="c29">DBA</span></p><p class="c30 c22 c35 title" id="h.mbjsiz6n6jlo"><span class="c3">Audit</span></p><p class="c18 subtitle" id="h.vb8p0lepu9vn"><span class="c32">Audit documentation</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 4.00px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 4.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="horizontal line"></span></p><p class="c21"><span class="c3 c38">Introduction:</span></p><p class="c26"><span class="c4">Auditing is the monitoring and recording of selected user database actions. It can be based on individual actions, such as the type of SQL statement executed, or on combinations of factors that can include user name, application, time, and so on. Security policies can trigger auditing when specified elements in an Oracle database are accessed or altered, including the contents within a specified object.</span></p><p class="c22 c23"><span class="c4">All database audit trail are stored in a table named SYS.AUD$ in the SYS schema. &nbsp;We can see all audited records by querying this table .</span></p><p class="c8 c9"><span class="c20">SELECT * FROM SYS.AUD$</span><span class="c16">;</span></p><p class="c10"><span class="c27">NOTE</span><span>:</span><span class="c4">(Remember that this table is in SYS schema. Users other than SYS &nbsp;need permission to access this table)</span></p><p class="c8"><span class="c6 c3">Steps :</span></p><p class="c8"><span class="c3">1</span><span>. </span><span class="c6 c3">Show audit parameter</span></p><p class="c8 c7"><span class="c16">SHOW PARAMETER AUDIT;</span></p><p class="c8"><span class="c4">Auditing parameter describes your database server auditing feature. </span></p><p class="c8"><span class="c3">2</span><span>. </span><span class="c6 c3">Alter audit_trail</span></p><p class="c14 c22"><span class="c4">To audit all sql text , the audit_trail parameter must be DB, EXTENDED</span></p><p class="c14 c22"><span class="c4">The audit_trail parameter can be altered by following command</span></p><p class="c8 c40"><span class="c16">ALTER SYSTEM SET AUDIT_TRAIL=DB,EXTENDED SCOPE=SPFILE;</span></p><p class="c8"><span class="c4">After this , the database instance must be restarted.</span></p><p class="c8"><span class="c3">3. Enable auditing on table</span><span class="c4">&nbsp;</span></p><p class="c14 c7"><span class="c20">AUDIT ALL ON DEMO_TABLE BY ACCESS;</span></p><p class="c0"><span class="c3">4. </span><span class="c6 c3">Create table where audit information will be stored</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 129.33px;"><img alt="" src="images/image6.png" style="width: 624.00px; height: 129.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c7"><span class="c4">Fig 4.1 : Audit_users_table</span></p><p class="c17"><span class="c6 c3"></span></p><p class="c0"><span class="c6 c3">5.Create procedure that inserts and updates information into audit table.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 195.17px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 195.17px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c33"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">Fig 5.1 : update_audit_table procedure</span></p><p class="c33 c22"><span class="c4">This procedure inserts records from SYS.AUD$ to audit_users_table which has not been inserted before. It doesn&rsquo;t inserts the audit information of system users and the objects which are created by system.</span></p><p class="c11"><span class="c6 c3">6. Create a directory:</span></p><p class="c11"><span>We need to create a directory to store all the audit files. For that, we created a directory named &lsquo;</span><span class="c3">USER_DIR</span><span>&rsquo; &nbsp;in our local drive &lsquo;</span><span class="c3">C:\Oracle</span><span class="c4">&rsquo;.</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 268.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 268.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c14 c28"><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fig 6.1 : Created a local directory named &lsquo;user_dir&rsquo; in &lsquo;C:\Oracle&rsquo; </span></p><p class="c11"><span class="c4">Then, we created a directory </span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 538.00px; height: 129.00px;"><img alt="" src="images/image1.png" style="width: 538.00px; height: 129.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c14 c15"><span class="c4">Fig 6.2: Created a directory user_dir </span></p><p class="c11"><span class="c6 c3">7. Create a CSV Output file:</span></p><p class="c11"><span>The records in our &lsquo;</span><span class="c3">audit_users_table</span><span>&rsquo; &nbsp;are to be written into a csv file. For that we created a procedure named &lsquo;</span><span class="c3">AUDIT_CSV</span><span class="c4">&rsquo; .</span></p><p class="c11"><span class="c4">We performed following activities in the procedure:</span></p><ul class="c1 lst-kix_d3dqh8fhuak0-0 start"><li class="c10 c12"><span>Created a cursor &lsquo;</span><span class="c20">c_data</span><span>&rsquo; to the table &lsquo;</span><span class="c3">AUDIT_USERS_TABLE</span><span>&rsquo; of </span><span class="c20">user_id, user_host, oject_creator, object_name, sql_text</span><span>&nbsp;columns where the timestamp matches the current timestamp.</span><span class="c4">&nbsp; </span></li><li class="c10 c12"><span>Created a variable named </span><span class="c20">v_file </span><span>of type </span><span class="c20">FILE_TYPE </span><span>&nbsp;from </span><span class="c3">UTL_FILE</span><span class="c4">&nbsp;package.</span></li><li class="c10 c12"><span class="c4">Create a variable to store the name of the audit file. File name of the the audit file was the system date before the word &lsquo;AUDIT_&rsquo;. For example: AUDIT_20180318.</span></li><li class="c10 c12"><span>We used </span><span class="c3">FOPEN </span><span>function of </span><span class="c3">UTL_FILE</span><span class="c4">&nbsp;package with the parameters .</span></li></ul><ul class="c1 lst-kix_d3dqh8fhuak0-1 start"><li class="c5"><span>Location of the directory. Here we used </span><span class="c3">USER_DIR</span><span class="c4">&nbsp;directory that we created earlier.</span></li><li class="c5"><span class="c4">Name of the output csv file</span></li><li class="c5"><span class="c4">Open mode of the file</span></li></ul><ul class="c1 lst-kix_d3dqh8fhuak0-2 start"><li class="c14 c7 c12"><span class="c4">&lsquo;W&rsquo; for write mode</span></li><li class="c7 c12 c14"><span class="c4">&lsquo;A&rsquo; for append mode</span></li></ul><ul class="c1 lst-kix_d3dqh8fhuak0-1"><li class="c5"><span class="c4">Max line size set to 32767.</span></li></ul><ul class="c1 lst-kix_d3dqh8fhuak0-0"><li class="c10 c12"><span class="c4">Then, we looped the records pointed from the cursor and wrote it to &nbsp;the file.</span></li><li class="c10 c12"><span>Finally we closed the file. Also, we wrote some exception too.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 580.00px; height: 441.50px;"><img alt="" src="images/image8.png" style="width: 580.00px; height: 441.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><p class="c14"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fig 7.1: AUDIT_CSV Procedure</span></p><p class="c8"><span class="c3 c6">8. Creating the schedule:</span></p><p class="c8"><span class="c4">After we successfully create the output csv file, we have to automate this task daily.</span></p><p class="c8"><span class="c4">For this, we used DBMS_SCHEDULER package to schedule this task regularly.</span></p><p class="c10"><span>Using the </span><span class="c3">DBMS_SCHEDULER</span><span>&nbsp;package, we created a job named &lsquo;</span><span class="c3">UPDATE_AUDIT_TABLE_JOB_DAILY</span><span>&rsquo; and &lsquo;</span><span class="c3">AUDIT_CSV_JOB_DAILY</span><span>&rsquo; of both type STORED PROCEDURE &nbsp;and calling &lsquo;</span><span class="c3">UPDATE_AUDIT_TABLE</span><span>&rsquo; and &lsquo;</span><span class="c3">AUDIT_CSV</span><span class="c4">&rsquo; procedures respectively.</span></p><p class="c8"><span class="c4">Both the jobs were started at the current timestamp and iterated DAILY.</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 349.33px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 349.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8 c19"><span class="c4">Fig 8.1 : Schedulers</span></p><p class="c8"><span class="c4">And, we can view the schedulers using </span></p><p class="c14 c7"><span class="c16">SELECT * FROM ALL_SCHEDULER_JOBS;</span></p><p class="c8"><span class="c6 c3">9. Drop the scheduler job:</span></p><p class="c8"><span class="c4">In case &nbsp;we need to drop the scheduler job, we could do this using the script</span></p><p class="c14 c7"><span class="c20">DBMS_SCHEDULER.DROP_JOB( &nbsp;</span><span class="c20">&lsquo;JOB_NAME&rsquo;</span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup><span class="c16">&nbsp; );</span></p><p class="c8 c34"><span class="c4"></span></p><div class="c24"><p class="c30"><a href="#cmnt_ref1" id="cmnt1">[a]</a><span class="c31">Substitute Job_name with the job name created in the scheduler.</span></p></div></body></html>